{% extends 'base.html' %}
{% load static %}

{% block title %}{{ about.title }} - {{ site_settings.site_name|default:"FreelancePro" }}{% endblock %}

{% block content %}
<!-- About Section -->
<section id="about-page" class="about-page" style="padding-top: 120px; min-height: 100vh;">
    <div class="container">
        {% if about %}
        <div class="section-header">
            <h2>About Us</h2>
            {% if about.subtitle %}
                <p>{{ about.subtitle }}</p>
            {% endif %}
        </div>
        <div class="about-content">
            <div class="about-text">
                <p>{{ about.content|linebreaks }}</p>
                {% if about.skills %}
                <div class="skills">
                    <h3>Skills & Expertise</h3>
                    <div class="skill-tags">
                        {% for skill in about.skills %}
                            <span class="skill-tag">{{ skill }}</span>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}
            </div>
            <div class="about-stats">
                <div class="stat-item">
                    <h3>{{ about.experience_years|default:"5" }}+</h3>
                    <p>Years Experience</p>
                </div>
                <div class="stat-item">
                    <h3>{{ about.projects_completed|default:"50" }}+</h3>
                    <p>Projects Completed</p>
                </div>
                <div class="stat-item">
                    <h3>{{ about.happy_clients|default:"30" }}+</h3>
                    <p>Happy Clients</p>
                </div>
                <div class="stat-item">
                    <h3>{{ about.satisfaction_rate|default:"100" }}%</h3>
                    <p>Client Satisfaction</p>
                </div>
            </div>
        </div>
        {% else %}
        <div class="section-header">
            <h2>About Me</h2>
            <p>Information about me is not available at the moment. Please check back later.</p>
        </div>
        {% endif %}
    </div>
</section>

<!-- Team Section -->
<section id="team" class="team-section">
    <div class="container">
        <div class="section-header">
            <h2>Meet Our Team</h2>
            <p>Our talented team of professionals dedicated to delivering exceptional results</p>
        </div>
        
        <div class="team-grid">
            <!-- Team Member 1 -->
            <div class="pc-card-wrapper" data-member="1">
                <section class="pc-card">
                    <div class="pc-inside">
                        <div class="pc-shine"></div>
                        <div class="pc-glare"></div>
                        <div class="pc-content pc-avatar-content">
                            <img class="avatar" src="{% static 'images/Profile1.jpeg' %}" alt="Alex Johnson" onerror="this.src='https://via.placeholder.com/400x600/4F8CFF/ffffff?text=AJ'">
                            <div class="pc-user-info">
                                <div class="pc-user-details">
                                    <div class="pc-mini-avatar">
                                        <img src="{% static 'images/Profile1.jpeg' %}" alt="Alex Johnson" onerror="this.src='https://via.placeholder.com/100x100/4F8CFF/ffffff?text=AJ'">
                                    </div>
                                    <div class="pc-user-text">
                                        <div class="pc-handle">@alexjohnson</div>
                                        <div class="pc-status">Available</div>
                                    </div>
                                </div>
                                <button class="pc-contact-btn" onclick="contactMember('alex')">Contact</button>
                            </div>
                        </div>
                        <div class="pc-content">
                            <div class="pc-details">
                                <h3>Alex Johnson</h3>
                                <p>Lead Developer & Project Manager</p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Team Member 2 -->
            <div class="pc-card-wrapper" data-member="2">
                <section class="pc-card">
                    <div class="pc-inside">
                        <div class="pc-shine"></div>
                        <div class="pc-glare"></div>
                        <div class="pc-content pc-avatar-content">
                            <img class="avatar" src="{% static 'images/team-member-2.jpg' %}" alt="Sarah Chen" onerror="this.src='https://via.placeholder.com/400x600/22C55E/ffffff?text=SC'">
                            <div class="pc-user-info">
                                <div class="pc-user-details">
                                    <div class="pc-mini-avatar">
                                        <img src="{% static 'images/team-member-2.jpg' %}" alt="Sarah Chen" onerror="this.src='https://via.placeholder.com/100x100/22C55E/ffffff?text=SC'">
                                    </div>
                                    <div class="pc-user-text">
                                        <div class="pc-handle">@sarahchen</div>
                                        <div class="pc-status">Available</div>
                                    </div>
                                </div>
                                <button class="pc-contact-btn" onclick="contactMember('sarah')">Contact</button>
                            </div>
                        </div>
                        <div class="pc-content">
                            <div class="pc-details">
                                <h3>Sarah Chen</h3>
                                <p>UI/UX Designer & Frontend Developer</p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Team Member 3 -->
            <div class="pc-card-wrapper" data-member="3">
                <section class="pc-card">
                    <div class="pc-inside">
                        <div class="pc-shine"></div>
                        <div class="pc-glare"></div>
                        <div class="pc-content pc-avatar-content">
                            <img class="avatar" src="{% static 'images/team-member-3.jpg' %}" alt="Michael Rodriguez" onerror="this.src='https://via.placeholder.com/400x600/EF4444/ffffff?text=MR'">
                            <div class="pc-user-info">
                                <div class="pc-user-details">
                                    <div class="pc-mini-avatar">
                                        <img src="{% static 'images/team-member-3.jpg' %}" alt="Michael Rodriguez" onerror="this.src='https://via.placeholder.com/100x100/EF4444/ffffff?text=MR'">
                                    </div>
                                    <div class="pc-user-text">
                                        <div class="pc-handle">@michaelrod</div>
                                        <div class="pc-status">Available</div>
                                    </div>
                                </div>
                                <button class="pc-contact-btn" onclick="contactMember('michael')">Contact</button>
                            </div>
                        </div>
                        <div class="pc-content">
                            <div class="pc-details">
                                <h3>Michael Rodriguez</h3>
                                <p>Backend Developer & DevOps Engineer</p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>

        <!-- Team Expertise Section -->
        <div class="team-expertise-section">
            <div class="expertise-grid">
                <div class="expertise-card" data-expertise="django">
                    <div class="expertise-icon">
                        <i class="fab fa-python"></i>
                    </div>
                    <h3>Django Development</h3>
                    <p>Full-stack web applications with Django, PostgreSQL, and modern frontend technologies.</p>
                    <div class="expertise-tags">
                        <span>Django</span>
                        <span>Python</span>
                        <span>PostgreSQL</span>
                    </div>
                </div>
                
                <div class="expertise-card" data-expertise="frontend">
                    <div class="expertise-icon">
                        <i class="fab fa-react"></i>
                    </div>
                    <h3>Frontend Development</h3>
                    <p>Modern, responsive user interfaces with React, Vue.js, and cutting-edge CSS frameworks.</p>
                    <div class="expertise-tags">
                        <span>React</span>
                        <span>Vue.js</span>
                        <span>CSS3</span>
                    </div>
                </div>
                
                <div class="expertise-card" data-expertise="design">
                    <div class="expertise-icon">
                        <i class="fas fa-palette"></i>
                    </div>
                    <h3>UI/UX Design</h3>
                    <p>User-centered design solutions with focus on accessibility, usability, and modern aesthetics.</p>
                    <div class="expertise-tags">
                        <span>Figma</span>
                        <span>Adobe XD</span>
                        <span>Prototyping</span>
                    </div>
                </div>
                
                <div class="expertise-card" data-expertise="devops">
                    <div class="expertise-icon">
                        <i class="fas fa-cloud"></i>
                    </div>
                    <h3>DevOps & Cloud</h3>
                    <p>Scalable infrastructure, CI/CD pipelines, and cloud deployment solutions.</p>
                    <div class="expertise-tags">
                        <span>AWS</span>
                        <span>Docker</span>
                        <span>Kubernetes</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
// Advanced 3D Tilt Effect for Profile Cards
document.addEventListener('DOMContentLoaded', function() {
    const cards = document.querySelectorAll('.pc-card-wrapper');
    
    cards.forEach(card => {
        const cardElement = card.querySelector('.pc-card');
        let rafId = null;
        
        // Mouse tracking variables
        let isHovering = false;
        let currentX = 0;
        let currentY = 0;
        let targetX = 0;
        let targetY = 0;
        
        // Animation configuration
        const config = {
            smoothDuration: 600,
            initialDuration: 1500,
            initialXOffset: 70,
            initialYOffset: 60
        };
        
        // Utility functions
        const clamp = (value, min = 0, max = 100) => Math.min(Math.max(value, min), max);
        const round = (value, precision = 3) => parseFloat(value.toFixed(precision));
        const adjust = (value, fromMin, fromMax, toMin, toMax) => 
            round(toMin + ((toMax - toMin) * (value - fromMin)) / (fromMax - fromMin));
        const easeInOutCubic = (x) => x < 0.5 ? 4 * x * x * x : 1 - Math.pow(-2 * x + 2, 3) / 2;
        
        // Update card transform
        const updateCardTransform = (offsetX, offsetY) => {
            const width = cardElement.clientWidth;
            const height = cardElement.clientHeight;
            
            const percentX = clamp((100 / width) * offsetX);
            const percentY = clamp((100 / height) * offsetY);
            
            const centerX = percentX - 50;
            const centerY = percentY - 50;
            
            const properties = {
                '--pointer-x': `${percentX}%`,
                '--pointer-y': `${percentY}%`,
                '--background-x': `${adjust(percentX, 0, 100, 35, 65)}%`,
                '--background-y': `${adjust(percentY, 0, 100, 35, 65)}%`,
                '--pointer-from-center': `${clamp(Math.hypot(percentY - 50, percentX - 50) / 50, 0, 1)}`,
                '--pointer-from-top': `${percentY / 100}`,
                '--pointer-from-left': `${percentX / 100}`,
                '--rotate-x': `${round(-(centerX / 5))}deg`,
                '--rotate-y': `${round(centerY / 4)}deg`
            };
            
            Object.entries(properties).forEach(([property, value]) => {
                card.style.setProperty(property, value);
            });
        };
        
        // Smooth animation
        const createSmoothAnimation = (duration, startX, startY) => {
            const startTime = performance.now();
            const targetX = card.clientWidth / 2;
            const targetY = card.clientHeight / 2;
            
            const animationLoop = (currentTime) => {
                const elapsed = currentTime - startTime;
                const progress = clamp(elapsed / duration);
                const easedProgress = easeInOutCubic(progress);
                
                const currentX = adjust(easedProgress, 0, 1, startX, targetX);
                const currentY = adjust(easedProgress, 0, 1, startY, targetY);
                
                updateCardTransform(currentX, currentY);
                
                if (progress < 1) {
                    rafId = requestAnimationFrame(animationLoop);
                }
            };
            
            rafId = requestAnimationFrame(animationLoop);
        };
        
        // Event handlers
        const handlePointerMove = (event) => {
            if (!isHovering) return;
            
            const rect = cardElement.getBoundingClientRect();
            const offsetX = event.clientX - rect.left;
            const offsetY = event.clientY - rect.top;
            
            updateCardTransform(offsetX, offsetY);
        };
        
        const handlePointerEnter = () => {
            isHovering = true;
            card.classList.add('active');
            cardElement.classList.add('active');
            
            if (rafId) {
                cancelAnimationFrame(rafId);
                rafId = null;
            }
        };
        
        const handlePointerLeave = (event) => {
            isHovering = false;
            card.classList.remove('active');
            cardElement.classList.remove('active');
            
            const rect = cardElement.getBoundingClientRect();
            const offsetX = event.clientX - rect.left;
            const offsetY = event.clientY - rect.top;
            
            createSmoothAnimation(config.smoothDuration, offsetX, offsetY);
        };
        
        // Add event listeners
        cardElement.addEventListener('pointerenter', handlePointerEnter);
        cardElement.addEventListener('pointermove', handlePointerMove);
        cardElement.addEventListener('pointerleave', handlePointerLeave);
        
        // Initial animation
        const initialX = card.clientWidth - config.initialXOffset;
        const initialY = config.initialYOffset;
        
        updateCardTransform(initialX, initialY);
        createSmoothAnimation(config.initialDuration, initialX, initialY);
    });
});

// Contact member function
function contactMember(member) {
    const members = {
        'alex': { name: 'Alex Johnson', email: 'alex@example.com' },
        'sarah': { name: 'Sarah Chen', email: 'sarah@example.com' },
        'michael': { name: 'Michael Rodriguez', email: 'michael@example.com' }
    };
    
    const memberInfo = members[member];
    if (memberInfo) {
        // You can customize this to open a contact form or modal
        alert(`Contact ${memberInfo.name} at ${memberInfo.email}`);
    }
}
</script>
{% endblock %} 